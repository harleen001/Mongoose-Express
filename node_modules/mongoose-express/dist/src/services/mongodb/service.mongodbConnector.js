"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.connectToDb = exports.connect = void 0;
const M = require("mongoose");
const config_mongdb_1 = __importDefault(require("../../configs/config.mongdb"));
const Mongoose = new M.Mongoose({});
// Connect to MongoDB
async function connect(connectionString, mongoose) {
    return new Promise((res, rej) => {
        console.log('Connecting to ' + connectionString);
        mongoose.connect(connectionString, {}, (info) => {
            console.log('info');
            res();
        });
    });
}
exports.connect = connect;
exports.default = Mongoose;
const connectToDb = (connectionString = config_mongdb_1.default.connectionString, mongoose = Mongoose) => {
    connect(connectionString, mongoose);
    mongoose.connection.on('open', () => {
        console.log('\x1b[32m', 'Successfully connected to database', '\u001b[0m');
    });
    mongoose.connection.on('error', () => {
        console.log('Connection to database lost. Good Bye...');
        setTimeout(() => {
            process.exit();
        }, 500);
    });
    mongoose.connection.on('disconnect', () => {
        console.log('Database got disconnected. Good Bye...');
        setTimeout(() => {
            process.exit();
        }, 500);
    });
    mongoose.connection.on('close', () => {
        console.log('Connection to database was closed. Good Bye..');
        setTimeout(() => {
            process.exit();
        }, 500);
    });
};
exports.connectToDb = connectToDb;
//# sourceMappingURL=service.mongodbConnector.js.map